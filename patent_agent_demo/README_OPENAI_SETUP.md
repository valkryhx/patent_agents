# OpenAI GPT-5 + GLM-4.5 Fallback Setup

## æ¦‚è¿°

æœ¬ç³»ç»Ÿç°åœ¨æ”¯æŒOpenAI GPT-5ä½œä¸ºä¸»è¦AIæ¨¡å‹ï¼Œå½“OpenAI APIé…é¢ä¸è¶³æˆ–å‡ºç°é”™è¯¯æ—¶ï¼Œè‡ªåŠ¨é™çº§åˆ°GLM-4.5æ¨¡å‹ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ”„ æ™ºèƒ½é™çº§ç³»ç»Ÿ
- **ä¸»è¦æ¨¡å‹**: OpenAI GPT-5 (æ”¯æŒweb searchå·¥å…·)
- **å¤‡ç”¨æ¨¡å‹**: GLM-4.5 (æœ¬åœ°éƒ¨ç½²)
- **è‡ªåŠ¨åˆ‡æ¢**: å½“OpenAI APIå¤±è´¥æ—¶è‡ªåŠ¨é™çº§

### ğŸŒ æœç´¢åŠŸèƒ½
- **OpenAIæ¨¡å¼**: ä½¿ç”¨GPT-5çš„web searchå·¥å…·
- **GLMé™çº§æ¨¡å¼**: ä½¿ç”¨å…è´¹çš„DuckDuckGoæœç´¢

## è®¾ç½®æ­¥éª¤

### 1. åˆ›å»ºOpenAI API Keyæ–‡ä»¶

```bash
# åœ¨patent_agent_demoç›®å½•ä¸‹åˆ›å»ºç§é’¥æ–‡ä»¶
echo "your_openai_api_key_here" > patent_agent_demo/private_openai_key
```

**âš ï¸ é‡è¦**: ç¡®ä¿æ­¤æ–‡ä»¶å·²æ·»åŠ åˆ°.gitignoreä¸­ï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

### 2. å®‰è£…ä¾èµ–

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source patent_env/bin/activate

# å®‰è£…OpenAIä¾èµ–
pip install openai requests
```

### 3. éªŒè¯è®¾ç½®

```bash
# æµ‹è¯•é™çº§åŠŸèƒ½
python test_fallback.py

# æµ‹è¯•DuckDuckGoæœç´¢
python test_duckduckgo.py
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

```python
from patent_agent_demo.openai_client import OpenAIClient

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = OpenAIClient()

# åˆ†æä¸“åˆ©ä¸»é¢˜ (è‡ªåŠ¨é™çº§æ”¯æŒ)
analysis = await client.analyze_patent_topic("ä¸»é¢˜", "æè¿°")

# æœç´¢ç°æœ‰æŠ€æœ¯ (è‡ªåŠ¨é™çº§æ”¯æŒ)
results = await client.search_prior_art("ä¸»é¢˜", ["å…³é”®è¯1", "å…³é”®è¯2"])

# ç”Ÿæˆä¸“åˆ©è‰ç¨¿ (è‡ªåŠ¨é™çº§æ”¯æŒ)
draft = await client.generate_patent_draft("ä¸»é¢˜", "æè¿°", analysis)
```

### é™çº§è¡Œä¸º

1. **é¦–æ¬¡å°è¯•**: ä½¿ç”¨OpenAI GPT-5
2. **æ£€æµ‹åˆ°é”™è¯¯**: è‡ªåŠ¨åˆ‡æ¢åˆ°GLM-4.5
3. **æœç´¢é™çº§**: ä»OpenAI web searchåˆ‡æ¢åˆ°DuckDuckGo

## é”™è¯¯å¤„ç†

### OpenAIé…é¢ä¸è¶³ (429é”™è¯¯)
- è‡ªåŠ¨æ£€æµ‹é…é¢é”™è¯¯
- æ— ç¼åˆ‡æ¢åˆ°GLM-4.5
- è®°å½•é™çº§æ—¥å¿—

### ç½‘ç»œé”™è¯¯
- é‡è¯•æœºåˆ¶
- é™çº§åˆ°æœ¬åœ°GLMæ¨¡å‹
- ä¿æŒç³»ç»Ÿå¯ç”¨æ€§

## æ—¥å¿—å’Œç›‘æ§

ç³»ç»Ÿä¼šè®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
- OpenAI APIè°ƒç”¨çŠ¶æ€
- é™çº§è§¦å‘åŸå› 
- GLMå¤‡ç”¨æ¨¡å‹ä½¿ç”¨æƒ…å†µ
- æœç´¢åŠŸèƒ½åˆ‡æ¢çŠ¶æ€

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **OpenAI API Keyæ— æ•ˆ**
   - æ£€æŸ¥private_openai_keyæ–‡ä»¶
   - éªŒè¯API keyæ ¼å¼

2. **GLMé™çº§å¤±è´¥**
   - æ£€æŸ¥GLMæœåŠ¡çŠ¶æ€
   - éªŒè¯GLMå®¢æˆ·ç«¯é…ç½®

3. **DuckDuckGoæœç´¢å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - éªŒè¯requestsåº“å®‰è£…

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

## æ€§èƒ½ä¼˜åŒ–

- **æ™ºèƒ½ç¼“å­˜**: é¿å…é‡å¤APIè°ƒç”¨
- **æ‰¹é‡å¤„ç†**: ä¼˜åŒ–å¤šä¸ªè¯·æ±‚
- **å¼‚æ­¥æ”¯æŒ**: æé«˜å¹¶å‘æ€§èƒ½

## å®‰å…¨æ³¨æ„äº‹é¡¹

- æ°¸è¿œä¸è¦æäº¤API keyåˆ°ç‰ˆæœ¬æ§åˆ¶
- ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–ç§é’¥æ–‡ä»¶
- å®šæœŸè½®æ¢API key
- ç›‘æ§APIä½¿ç”¨é‡